<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="layout :: head"></head>
<body>
<header th:replace="fragments/header :: header"></header>

<main class="wrapper">
  <aside th:replace="layout :: sidebar"></aside>

  <div class="content bg-light">
    <h2>Admin panel</h2>
    <div>
      <div class="nav nav-tabs" id="nav-tab" role="tablist">
        <button aria-controls="nav-user-table" aria-selected="true" class="nav-link active"
                data-bs-target="#nav-user-table"
                data-bs-toggle="tab" id="user-table-tab" role="tab" type="button">User table
        </button>
        <button aria-controls="nav-new-user" aria-selected="false" class="nav-link" data-bs-target="#nav-new-user"
                data-bs-toggle="tab"
                id="new-user-tab" role="tab" type="button">New User
        </button>
      </div>
    </div>
    <div class="table-responsive shadow-sm rounded">
      <table class="table table-striped table-bordered text-center">
        <thead class="table-dark">
        <tr>
          <th scope="col">ID</th>
          <th scope="col">Name</th>
          <th scope="col">Last Name</th>
          <th scope="col">Age</th>
          <th scope="col">Email</th>
          <th scope="col">Role</th>
          <th scope="col">Edit</th>
          <th scope="col">Delete</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="user : ${users}">
          <td th:text="${user.id}"/>
          <td th:text="${user.firstName}"/>
          <td th:text="${user.lastName}"/>
          <td th:text="${user.age}"/>
          <td th:text="${user.email}"/>
          <td th:text="${user.roles}"/>
          <!-- Edit action -->
          <td>
            <button class="btn btn-outline-primary btn-sm" data-bs-target="#userEdit" data-bs-toggle="modal"
                    th:data-age="${user.age}"
                    th:data-email="${user.email}"
                    th:data-firstName="${user.firstName}"
                    th:data-id="${user.id}"
                    th:data-lastName="${user.lastName}"
                    th:data-roles="${user.roles}"
                    type="button">
              <img alt="Edit" class="img-fluid" style="width: 1.6rem; height: 1.6rem" th:src="@{/img/edit-2-line.svg}">
              <span>Edit</span>
            </button>
          </td>
          <td>
            <form class="m-0" method="post" th:action="@{/admin/delete/{id}(id=${user.id})}">
              <input name="_method" type="hidden" value="delete">
              <button class="btn btn-outline-danger btn-sm" type="submit">
                <img alt="Delete" class="img-fluid" style="width: 1.65rem; height: 1.65rem"
                     th:src="@{/img/delete-row.svg}">
                <span>Delete</span>
              </button>
            </form>
          </td>
        </tr>
        <tr>
          <td class="text-center" colspan="8">
            <a class="btn btn-success d-inline-flex align-items-center" href="admin/create">
              <img alt="Add" class="img-fluid me-2" style="width: 2rem; height: 2rem" th:src="@{/img/add-box-line.svg}">Add
              new user
            </a>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>
</main>

<div th:replace="update :: edit"/>

</body>
</html>