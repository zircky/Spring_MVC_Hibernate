<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="layout :: head"></head>
<body>
<header class="header navbar navbar-dark sticky-top flex-md-nowrap p-1">
  <div class="navbar-brand col-md-3 col-lg-2 me-0 px-3 fs-6">
    <div class="d-inline h5 fw-bold">
      <!--      <span th:text="${user.email}"></span>-->
    </div>
    <div class="d-inline h5 fw-light">
      <span>with roles:</span>
    </div>
    <!--    <div class="d-inline h5 fw-light" th:each="role : ${user.roles}">-->
    <!--      <span th:text="${#strings.substringAfter(role.value, 'ROLE_')}">Role</span>-->
    <!--    </div>-->
  </div>
  <div class="navbar-nav">
    <div class="nav-item text-nowrap">
      <form action="/logout" method="post">
        <input th:name="${_csrf.parameterName}" th:value="${_csrf.token}" type="hidden"/>
        <button class="btn btn-link nav-link px-3" type="submit">Logout</button>
      </form>

    </div>
  </div>
</header>

<main class="wrapper">
  <aside th:replace="layout :: sidebar"></aside>

  <div class="content bg-light">
    <h2>Admin panel</h2>
    <div>
      <div class="nav nav-tabs" id="nav-tab" role="tablist">
        <button aria-controls="nav-user-table" aria-selected="true" class="nav-link active" data-bs-target="#nav-user-table"
                data-bs-toggle="tab" id="user-table-tab" role="tab" type="button">User table
        </button>
        <button aria-controls="nav-new-user" aria-selected="false" class="nav-link" data-bs-target="#nav-new-user" data-bs-toggle="tab"
                id="new-user-tab" role="tab" type="button">New User
        </button>
      </div>
    </div>
    <div class="table-responsive shadow-sm rounded">
      <table class="table table-striped table-bordered text-center">
        <thead class="table-dark">
        <tr>
          <th scope="col">ID</th>
          <th scope="col">Name</th>
          <th scope="col">Last Name</th>
          <th scope="col">Age</th>
          <th scope="col">Email</th>
          <th scope="col">Role</th>
          <th scope="col">Edit</th>
          <th scope="col">Delete</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="user : ${users}">
          <td th:text="${user.id}"></td>
          <td th:text="${user.firstName}"></td>
          <td th:text="${user.lastName}"></td>
          <td th:text="${user.age}"></td>
          <td th:text="${user.email}"></td>
          <td th:text="${user.roles}"></td>
          <!-- Edit action -->
          <td>
            <a class="btn btn-outline-primary btn-sm" th:href="@{/admin/update(id=${user.id})}">
              <img alt="Edit" class="img-fluid" style="width: 1.6rem; height: 1.6rem" th:src="@{/img/edit-2-line.svg}">
              <span>Edit</span>
            </a>
          </td>
          <!-- Delete action -->
          <td>
            <form class="m-0" method="post" th:action="@{/admin/delete/{id}(id=${user.id})}">
              <input name="_method" type="hidden" value="delete">
              <button class="btn btn-outline-danger btn-sm" type="submit">
                <img alt="Delete" class="img-fluid" style="width: 1.65rem; height: 1.65rem"
                     th:src="@{/img/delete-row.svg}">
                <span>Delete</span>
              </button>
            </form>
          </td>
        </tr>
        <!-- Add new user row -->
        <tr>
          <td class="text-center" colspan="7">
            <a class="btn btn-success d-inline-flex align-items-center" href="admin/create">
              <img alt="Add" class="img-fluid me-2" style="width: 2rem; height: 2rem" th:src="@{/img/add-box-line.svg}">Add
              new user
            </a>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>
</main>
<script crossorigin="anonymous"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>